#!/bin/bash

# Pre-commit hook to auto-generate architecture.md
# This ensures the architecture documentation stays in sync with code changes

echo "ðŸ“ Regenerating architecture documentation..."

# Run the architecture generator
npx tsx scripts/generate-architecture.ts

# Check if architecture files were modified and stage them
ARCH_FILES="ARCHITECTURE.md public/claude-data/system/architecture.md"

for file in $ARCH_FILES; do
  if [ -f "$file" ]; then
    if ! git diff --quiet "$file" 2>/dev/null; then
      git add "$file"
      echo "âœ“ Staged $file"
    fi
  fi
done

echo "âœ“ Architecture docs updated"

# Continue with the commit
exit 0

