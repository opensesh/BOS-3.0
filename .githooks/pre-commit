#!/bin/bash

# Pre-commit hook to auto-generate ARCHITECTURE.md
# This ensures the architecture documentation stays in sync with code changes

echo "ðŸ“ Regenerating ARCHITECTURE.md..."

# Run the architecture generator
npx tsx scripts/generate-architecture.ts

# Check if ARCHITECTURE.md was modified
if git diff --quiet ARCHITECTURE.md 2>/dev/null; then
  echo "âœ“ ARCHITECTURE.md is up to date"
else
  echo "âœ“ ARCHITECTURE.md updated"
  # Stage the updated file so it's included in the commit
  git add ARCHITECTURE.md
  echo "âœ“ Staged ARCHITECTURE.md"
fi

# Continue with the commit
exit 0

